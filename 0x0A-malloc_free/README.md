Manual memory allocation using malloc and free